{% extends 'base.html' %}
{% block content %}
<style>
  .patient-dashboard-page {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: #2c3e50;
    line-height: 1.6;
  }

  .patient-dashboard-card {
    border-radius: 15px;
    overflow: hidden;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
    margin-bottom: 1.5rem;
    border: none;
  }

  .patient-dashboard-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
  }

  .patient-dashboard-card .card-header {
    background: linear-gradient(135deg, #0d6efd, #0b5ed7);
    color: white;
    border-radius: 15px 15px 0 0 !important;
    border: none;
  }

  .patient-stat-card {
    border-radius: 15px;
    border: none;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
    height: 100%;
  }

  .patient-stat-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
  }

  .patient-stat-card.bg-primary {
    background: linear-gradient(135deg, #0d6efd, #0b5ed7) !important;
  }

  .patient-stat-card.bg-success {
    background: linear-gradient(135deg, #198754, #146c43) !important;
  }

  .patient-stat-card.bg-info {
    background: linear-gradient(135deg, #0dcaf0, #31d2f2) !important;
  }

  .patient-stat-card.bg-warning {
    background: linear-gradient(135deg, #ffc107, #ffca2c) !important;
  }

  .patient-hospital-card {
    border-radius: 12px;
    border: none;
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
    transition: all 0.3s ease;
  }

  .patient-hospital-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
  }

  .patient-treatment-card {
    border-radius: 12px;
    border: none;
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
    transition: all 0.3s ease;
    text-decoration: none;
    color: inherit;
  }

  .patient-treatment-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
    color: inherit;
  }

  .patient-doctor-card {
    border-radius: 12px;
    border: none;
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
    transition: all 0.3s ease;
  }

  .patient-doctor-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
  }

  .patient-profile-card {
    border-radius: 15px;
    border: none;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
  }

  .patient-profile-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
  }

  .patient-action-btn {
    border-radius: 10px;
    font-weight: 600;
    padding: 0.75rem 1.5rem;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(13, 110, 253, 0.3);
  }

  .patient-action-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 7px 20px rgba(13, 110, 253, 0.4);
  }

  .patient-view-all-btn {
    border-radius: 8px;
    font-weight: 600;
    transition: all 0.2s ease;
  }

  .patient-view-all-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  .patient-badge {
    padding: 0.5rem 0.75rem;
    font-size: 0.85rem;
    border-radius: 20px;
  }

  .patient-table th {
    font-weight: 600;
    color: #2c3e50;
  }

  .patient-table tr:hover {
    background-color: #f8f9fa;
  }

  .patient-modal-content {
    border-radius: 15px;
    border: none;
  }

  .patient-modal-header {
    background: linear-gradient(135deg, #0d6efd, #0b5ed7);
    color: white;
    border-radius: 15px 15px 0 0 !important;
    border: none;
  }

  .patient-modal-footer {
    border-radius: 0 0 15px 15px !important;
  }

  .patient-icon-box {
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 12px;
    background: rgba(13, 110, 253, 0.1);
    color: #0d6efd;
    font-size: 1.5rem;
    margin-bottom: 1rem;
  }

  @media (max-width: 768px) {
    .patient-dashboard-page {
      padding: 1rem;
    }
    
    .patient-dashboard-card {
      margin-bottom: 1rem;
    }
    
    .patient-stat-card {
      margin-bottom: 1rem;
    }
    
    .patient-icon-box {
      width: 50px;
      height: 50px;
      font-size: 1.25rem;
    }
  }
</style>

<div class="container-fluid patient-dashboard-page">
  <div class="row">
    <div class="col-12">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
          <h1 class="h3 mb-0">Patient Dashboard</h1>
          <p class="mb-0 text-muted">Welcome back, {{ user_profile.full_name|default:user_profile.user.username }}</p>
        </div>
        <a href="{% url 'accounts:logout' %}" class="btn btn-outline-danger">
          <i class="bi bi-box-arrow-right me-2"></i>Logout
        </a>
      </div>
      
      <div class="row mb-4">
        <div class="col-md-3">
          <div class="card patient-stat-card bg-primary text-white h-100">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <h5 class="mb-0">Upcoming Appointments</h5>
                  <h2 class="mb-0">{{ total_appointments }}</h2>
                </div>
                <i class="bi bi-calendar-event fs-1"></i>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card patient-stat-card bg-success text-white h-100">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <h5 class="mb-0">Medical Records</h5>
                  <h2 class="mb-0">{{ medical_records }}</h2>
                </div>
                <i class="bi bi-file-medical fs-1"></i>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card patient-stat-card bg-info text-white h-100">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <h5 class="mb-0">Prescriptions</h5>
                  <h2 class="mb-0">{{ prescriptions }}</h2>
                </div>
                <i class="bi bi-prescription fs-1"></i>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card patient-stat-card bg-warning text-white h-100">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <h5 class="mb-0">Health Score</h5>
                  <h2 class="mb-0">{{ health_score }}</h2>
                </div>
                <i class="bi bi-heart fs-1"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="row">
        <div class="col-lg-8">
          <div class="card mb-4 patient-dashboard-card">
            <div class="card-header bg-white">
              <div class="d-flex justify-content-between align-items-center">
                <h5 class="mb-0">Upcoming Appointments</h5>
                <a href="{% url 'bookings:booking_page' %}" class="btn btn-sm btn-outline-primary patient-view-all-btn">View All</a>
              </div>
            </div>
            <div class="card-body">
              <div class="table-responsive">
                <table class="table table-hover patient-table">
                  <thead>
                    <tr>
                      <th>Doctor</th>
                      <th>Date & Time</th>
                      <th>Treatment</th>
                      <th>Status</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for appointment in upcoming_appointments %}
                    <tr>
                      <td>
                        <div class="d-flex align-items-center">
                          <div class="bg-light rounded-circle me-3 d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">
                            <i class="bi bi-person-badge text-muted"></i>
                          </div>
                          <div>
                            <div class="fw-semibold">
                              {% if appointment.preferred_doctor %}
                                Dr. {{ appointment.preferred_doctor.name }}
                              {% else %}
                                Doctor Not Assigned
                              {% endif %}
                            </div>
                            <div class="small text-muted">{{ appointment.treatment.name }}</div>
                          </div>
                        </div>
                      </td>
                      <td>
                        <div>{{ appointment.preferred_date|date:"M d, Y" }}</div>
                        <div class="small text-muted">{{ appointment.preferred_date|date:"g:i A" }}</div>
                      </td>
                      <td>{{ appointment.treatment.name }}</td>
                      <td>
                        {% if appointment.status == 'pending' %}
                          <span class="badge bg-warning patient-badge">Pending</span>
                        {% elif appointment.status == 'confirmed' %}
                          <span class="badge bg-success patient-badge">Confirmed</span>
                        {% elif appointment.status == 'in_progress' %}
                          <span class="badge bg-info patient-badge">In Progress</span>
                        {% elif appointment.status == 'completed' %}
                          <span class="badge bg-secondary patient-badge">Completed</span>
                        {% elif appointment.status == 'cancelled' %}
                          <span class="badge bg-danger patient-badge">Cancelled</span>
                        {% else %}
                          <span class="badge bg-warning patient-badge">Scheduled</span>
                        {% endif %}
                      </td>
                      <td>
                        <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#appointmentModal{{ appointment.id }}">Details</button>
                        
                        <!-- Appointment Details Modal -->
                        <div class="modal fade" id="appointmentModal{{ appointment.id }}" tabindex="-1">
                          <div class="modal-dialog">
                            <div class="modal-content patient-modal-content">
                              <div class="modal-header patient-modal-header">
                                <h5 class="modal-title">Appointment Details</h5>
                                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                              </div>
                              <div class="modal-body">
                                <div class="row">
                                  <div class="col-md-6">
                                    <p><strong>Doctor:</strong> 
                                      {% if appointment.preferred_doctor %}
                                        Dr. {{ appointment.preferred_doctor.name }}
                                      {% else %}
                                        Doctor Not Assigned
                                      {% endif %}
                                    </p>
                                    <p><strong>Treatment:</strong> {{ appointment.treatment.name }}</p>
                                    <p><strong>Date:</strong> {{ appointment.preferred_date|date:"M d, Y" }}</p>
                                    <p><strong>Time:</strong> {{ appointment.preferred_date|date:"g:i A" }}</p>
                                  </div>
                                  <div class="col-md-6">
                                    <p><strong>Status:</strong> 
                                      {% if appointment.status == 'pending' %}
                                        <span class="badge bg-warning patient-badge">Pending</span>
                                      {% elif appointment.status == 'confirmed' %}
                                        <span class="badge bg-success patient-badge">Confirmed</span>
                                      {% elif appointment.status == 'in_progress' %}
                                        <span class="badge bg-info patient-badge">In Progress</span>
                                      {% elif appointment.status == 'completed' %}
                                        <span class="badge bg-secondary patient-badge">Completed</span>
                                      {% elif appointment.status == 'cancelled' %}
                                        <span class="badge bg-danger patient-badge">Cancelled</span>
                                      {% else %}
                                        <span class="badge bg-warning patient-badge">Scheduled</span>
                                      {% endif %}
                                    </p>
                                    <p><strong>Reference ID:</strong> APPT-{{ appointment.id }}</p>
                                  </div>
                                </div>
                              </div>
                              <div class="modal-footer patient-modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                <a href="{% url 'bookings:booking_page' %}" class="btn btn-primary patient-action-btn">Reschedule</a>
                              </div>
                            </div>
                          </div>
                        </div>
                      </td>
                    </tr>
                    {% empty %}
                    <tr>
                      <td colspan="5" class="text-center py-4">
                        <i class="bi bi-calendar-x text-muted fs-1 d-block mb-2"></i>
                        <p class="mb-0 text-muted">No upcoming appointments</p>
                      </td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          
          <!-- Hospitals Section -->
          <div class="card mb-4 patient-dashboard-card">
            <div class="card-header bg-white">
              <div class="d-flex justify-content-between align-items-center">
                <h5 class="mb-0">Featured Hospitals</h5>
                <a href="/hospitals/" class="btn btn-sm btn-outline-primary patient-view-all-btn">View All</a>
              </div>
            </div>
            <div class="card-body">
              <div class="row g-3">
                <div class="col-md-6">
                  <div class="card h-100 patient-hospital-card">
                    <div class="position-relative">
                      <img src="https://picsum.photos/seed/h1/400/200" class="card-img-top object-fit-cover" alt="Apollo Hospitals" style="height: 120px;">
                      <div class="position-absolute bottom-0 end-0 m-2">
                        <span class="badge bg-white text-dark">
                          <i class="bi bi-star-fill text-warning me-1"></i>4.8
                        </span>
                      </div>
                    </div>
                    <div class="card-body">
                      <h6 class="card-title mb-1">Apollo Hospitals</h6>
                      <div class="small text-muted mb-2">
                        <i class="bi bi-geo-alt me-1"></i>Chennai
                      </div>
                      <div class="d-flex gap-1 mb-2">
                        <span class="badge bg-info">JCI</span>
                        <span class="badge bg-success">NABH</span>
                      </div>
                      <div class="small text-muted">
                        <i class="bi bi-check-circle-fill text-success me-1"></i>Cardiology, Orthopedics, Oncology
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="card h-100 patient-hospital-card">
                    <div class="position-relative">
                      <img src="https://picsum.photos/seed/h2/400/200" class="card-img-top object-fit-cover" alt="Fortis Healthcare" style="height: 120px;">
                      <div class="position-absolute bottom-0 end-0 m-2">
                        <span class="badge bg-white text-dark">
                          <i class="bi bi-star-fill text-warning me-1"></i>4.6
                        </span>
                      </div>
                    </div>
                    <div class="card-body">
                      <h6 class="card-title mb-1">Fortis Healthcare</h6>
                      <div class="small text-muted mb-2">
                        <i class="bi bi-geo-alt me-1"></i>Mumbai
                      </div>
                      <div class="d-flex gap-1 mb-2">
                        <span class="badge bg-info">JCI</span>
                        <span class="badge bg-warning">ISO</span>
                      </div>
                      <div class="small text-muted">
                        <i class="bi bi-check-circle-fill text-success me-1"></i>Neurology, Cardiology, Emergency
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="card h-100 patient-hospital-card">
                    <div class="position-relative">
                      <img src="https://picsum.photos/seed/h3/400/200" class="card-img-top object-fit-cover" alt="Max Healthcare" style="height: 120px;">
                      <div class="position-absolute bottom-0 end-0 m-2">
                        <span class="badge bg-white text-dark">
                          <i class="bi bi-star-fill text-warning me-1"></i>4.7
                        </span>
                      </div>
                    </div>
                    <div class="card-body">
                      <h6 class="card-title mb-1">Max Healthcare</h6>
                      <div class="small text-muted mb-2">
                        <i class="bi bi-geo-alt me-1"></i>Delhi
                      </div>
                      <div class="d-flex gap-1 mb-2">
                        <span class="badge bg-info">JCI</span>
                        <span class="badge bg-success">NABH</span>
                      </div>
                      <div class="small text-muted">
                        <i class="bi bi-check-circle-fill text-success me-1"></i>Orthopedics, Neurology, Oncology
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="card h-100 patient-hospital-card">
                    <div class="position-relative">
                      <img src="https://picsum.photos/seed/h4/400/200" class="card-img-top object-fit-cover" alt="Manipal Hospitals" style="height: 120px;">
                      <div class="position-absolute bottom-0 end-0 m-2">
                        <span class="badge bg-white text-dark">
                          <i class="bi bi-star-fill text-warning me-1"></i>4.5
                        </span>
                      </div>
                    </div>
                    <div class="card-body">
                      <h6 class="card-title mb-1">Manipal Hospitals</h6>
                      <div class="small text-muted mb-2">
                        <i class="bi bi-geo-alt me-1"></i>Bangalore
                      </div>
                      <div class="d-flex gap-1 mb-2">
                        <span class="badge bg-info">JCI</span>
                        <span class="badge bg-warning">ISO</span>
                      </div>
                      <div class="small text-muted">
                        <i class="bi bi-check-circle-fill text-success me-1"></i>Cardiology, Oncology, Transplant
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Treatments Section -->
          <div class="card patient-dashboard-card">
            <div class="card-header bg-white">
              <div class="d-flex justify-content-between align-items-center">
                <h5 class="mb-0">Medical Treatments</h5>
                <a href="/treatments/" class="btn btn-sm btn-outline-primary patient-view-all-btn">View All</a>
              </div>
            </div>
            <div class="card-body">
              <div class="row g-3">
                <div class="col-md-4">
                  <a href="/treatments/cardiac-surgery/" class="card h-100 text-decoration-none patient-treatment-card">
                    <div class="card-body text-center">
                      <div class="bg-light rounded-circle mx-auto d-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                        <i class="bi bi-heart fs-4 text-danger"></i>
                      </div>
                      <h6 class="card-title">Cardiac Surgery</h6>
                      <div class="small text-muted mb-2">Starting at $5,000</div>
                      <div class="small">
                        <i class="bi bi-clock me-1"></i>7-10 days
                      </div>
                    </div>
                  </a>
                </div>
                <div class="col-md-4">
                  <a href="/treatments/knee-replacement/" class="card h-100 text-decoration-none patient-treatment-card">
                    <div class="card-body text-center">
                      <div class="bg-light rounded-circle mx-auto d-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                        <i class="bi bi-bone fs-4 text-info"></i>
                      </div>
                      <h6 class="card-title">Knee Replacement</h6>
                      <div class="small text-muted mb-2">Starting at $7,500</div>
                      <div class="small">
                        <i class="bi bi-clock me-1"></i>5-7 days
                      </div>
                    </div>
                  </a>
                </div>
                <div class="col-md-4">
                  <a href="/treatments/cosmetic-surgery/" class="card h-100 text-decoration-none patient-treatment-card">
                    <div class="card-body text-center">
                      <div class="bg-light rounded-circle mx-auto d-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                        <i class="bi bi-stars fs-4 text-warning"></i>
                      </div>
                      <h6 class="card-title">Cosmetic Surgery</h6>
                      <div class="small text-muted mb-2">Starting at $3,000</div>
                      <div class="small">
                        <i class="bi bi-clock me-1"></i>3-5 days
                      </div>
                    </div>
                  </a>
                </div>
                <div class="col-md-4">
                  <a href="/treatments/ivf-treatment/" class="card h-100 text-decoration-none patient-treatment-card">
                    <div class="card-body text-center">
                      <div class="bg-light rounded-circle mx-auto d-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                        <i class="bi bi-balloon-heart fs-4 text-primary"></i>
                      </div>
                      <h6 class="card-title">IVF Treatment</h6>
                      <div class="small text-muted mb-2">Starting at $4,500</div>
                      <div class="small">
                        <i class="bi bi-clock me-1"></i>14-21 days
                      </div>
                    </div>
                  </a>
                </div>
                <div class="col-md-4">
                  <a href="/treatments/orthopedic-surgery/" class="card h-100 text-decoration-none patient-treatment-card">
                    <div class="card-body text-center">
                      <div class="bg-light rounded-circle mx-auto d-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                        <i class="bi bi-bandaid fs-4 text-success"></i>
                      </div>
                      <h6 class="card-title">Orthopedic Surgery</h6>
                      <div class="small text-muted mb-2">Starting at $6,000</div>
                      <div class="small">
                        <i class="bi bi-clock me-1"></i>5-10 days
                      </div>
                    </div>
                  </a>
                </div>
                <div class="col-md-4">
                  <a href="/treatments/cancer-treatment/" class="card h-100 text-decoration-none patient-treatment-card">
                    <div class="card-body text-center">
                      <div class="bg-light rounded-circle mx-auto d-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                        <i class="bi bi-capsule fs-4 text-warning"></i>
                      </div>
                      <h6 class="card-title">Cancer Treatment</h6>
                      <div class="small text-muted mb-2">Starting at $12,000</div>
                      <div class="small">
                        <i class="bi bi-clock me-1"></i>30+ days
                      </div>
                    </div>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="col-lg-4">
          <div class="card mb-4 patient-dashboard-card">
            <div class="card-header bg-white">
              <h5 class="mb-0">Doctor Information</h5>
            </div>
            <div class="card-body">
              {% if doctor %}
                <div class="text-center mb-4">
                  <div class="bg-light rounded-circle mx-auto d-flex align-items-center justify-content-center" style="width: 96px; height: 96px;">
                    <i class="bi bi-person fs-1 text-muted"></i>
                  </div>
                  <h5 class="mb-1 mt-3">Dr. {{ doctor.name }}</h5>
                  <p class="mb-2 text-muted">Specialist in {% if doctor.treatments.all %}{{ doctor.treatments.all|join:", " }}{% else %}General Medicine{% endif %}</p>
                  <p class="mb-4 text-muted">{% if doctor.experience_years %}{{ doctor.experience_years }}{% else %}0{% endif %} years of experience</p>
                </div>
                
                <div class="mb-3">
                  <h6>Education</h6>
                  <p class="mb-0">{% if doctor.education %}{{ doctor.education|linebreaksbr }}{% else %}No education information available.{% endif %}</p>
                </div>
                
                <div class="mb-3">
                  <h6>Key Points</h6>
                  <p class="mb-0">{% if doctor.key_points %}{{ doctor.key_points|linebreaksbr }}{% else %}No key points available.{% endif %}</p>
                </div>
              {% else %}
                <p class="text-muted">No doctor information available.</p>
              {% endif %}
            </div>
          </div>
          
          <div class="card mb-4 patient-profile-card">
            <div class="card-header bg-white">
              <h5 class="mb-0">Profile</h5>
            </div>
            <div class="card-body text-center">
              <div class="mb-4">
                <div class="bg-light rounded-circle mx-auto d-flex align-items-center justify-content-center" style="width: 96px; height: 96px;">
                  <i class="bi bi-person fs-1 text-muted"></i>
                </div>
              </div>
              <h5 class="mb-1">{{ user_profile.full_name|default:user_profile.user.username }}</h5>
              <p class="mb-4 text-muted">Patient ID: PT-{{ user_profile.id|default:"1245" }}</p>
              <div class="d-grid">
                <a href="{% url 'accounts:patient_profile' %}" class="btn btn-outline-primary patient-action-btn">
                  <i class="bi bi-pencil me-2"></i>Edit Profile
                </a>
              </div>
            </div>
          </div>
          
          <div class="card mb-4 patient-dashboard-card">
            <div class="card-header bg-white">
              <h5 class="mb-0">Quick Actions</h5>
            </div>
            <div class="card-body">
              <div class="d-grid gap-3">
                <a href="{% url 'bookings:booking_page' %}" class="btn btn-outline-primary d-flex align-items-center patient-action-btn">
                  <i class="bi bi-calendar-plus me-2"></i>
                  <span>Book Appointment</span>
                </a>
                <a href="#" class="btn btn-outline-primary d-flex align-items-center patient-action-btn" data-bs-toggle="modal" data-bs-target="#uploadModal">
                  <i class="bi bi-file-medical me-2"></i>
                  <span>Upload Medical Records</span>
                </a>
                <a href="#" class="btn btn-outline-primary d-flex align-items-center patient-action-btn" data-bs-toggle="modal" data-bs-target="#prescriptionModal">
                  <i class="bi bi-prescription me-2"></i>
                  <span>View Prescriptions</span>
                </a>
                <a href="{% url 'contact' %}" class="btn btn-outline-primary d-flex align-items-center patient-action-btn">
                  <i class="bi bi-chat-dots me-2"></i>
                  <span>Message Doctor</span>
                </a>
              </div>
            </div>
          </div>
          
          <div class="card mb-4 patient-dashboard-card">
            <div class="card-header bg-white">
              <h5 class="mb-0">Photo Gallery</h5>
            </div>
            <div class="card-body">
              {% if hospital and hospital.media_items.all %}
                <div class="row g-3">
                  {% for media in hospital.media_items.all %}
                    {% if media.image_url %}
                      <div class="col-md-6 col-lg-12">
                        <img src="{{ media.image_url }}" class="img-fluid rounded" alt="Hospital photo">
                      </div>
                    {% endif %}
                  {% endfor %}
                </div>
              {% else %}
                <p class="text-muted">No photos available at the moment.</p>
              {% endif %}
            </div>
          </div>
          
          <div class="card mb-4 patient-dashboard-card">
            <div class="card-header bg-white">
              <h5 class="mb-0">Doctor Awards</h5>
            </div>
            <div class="card-body">
              {% if doctor and doctor.awards %}
                <ul class="list-group list-group-flush">
                  {% for award in doctor.awards|linebreaksbr %}
                    {% if award.strip %}
                      <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                        <span>{{ award|safe }}</span>
                        <i class="bi bi-trophy-fill text-warning"></i>
                      </li>
                    {% endif %}
                  {% endfor %}
                </ul>
              {% else %}
                <p class="text-muted">No awards to display.</p>
              {% endif %}
            </div>
          </div>
          
          <div class="card patient-dashboard-card">
            <div class="card-header bg-white">
              <h5 class="mb-0">Health Tips</h5>
            </div>
            <div class="card-body">
              <div class="d-flex">
                <div class="flex-shrink-0">
                  <i class="bi bi-lightbulb text-warning fs-4"></i>
                </div>
                <div class="flex-grow-1 ms-3">
                  <h6 class="mb-2">Stay Hydrated</h6>
                  <p class="small mb-0 text-muted">Drink at least 8 glasses of water daily for optimal health.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Upload Medical Records Modal -->
<div class="modal fade" id="uploadModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content patient-modal-content">
      <div class="modal-header patient-modal-header">
        <h5 class="modal-title">Upload Medical Records</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form>
          <div class="mb-3">
            <label class="form-label">Document Type</label>
            <select class="form-select">
              <option>Lab Report</option>
              <option>Prescription</option>
              <option>Medical History</option>
              <option>Imaging Report</option>
              <option>Other</option>
            </select>
          </div>
          <div class="mb-3">
            <label class="form-label">Description</label>
            <textarea class="form-control" rows="3" placeholder="Brief description of the document..."></textarea>
          </div>
          <div class="mb-3">
            <label class="form-label">Upload File</label>
            <input class="form-control" type="file">
          </div>
        </form>
      </div>
      <div class="modal-footer patient-modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary patient-action-btn" data-bs-dismiss="modal">Upload</button>
      </div>
    </div>
  </div>
</div>

<!-- Prescriptions Modal -->
<div class="modal fade" id="prescriptionModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content patient-modal-content">
      <div class="modal-header patient-modal-header">
        <h5 class="modal-title">My Prescriptions</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div class="table-responsive">
          <table class="table patient-table">
            <thead>
              <tr>
                <th>Medication</th>
                <th>Dosage</th>
                <th>Doctor</th>
                <th>Date</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Amoxicillin</td>
                <td>500mg, 3 times daily</td>
                <td>Dr. John Smith</td>
                <td>Oct 10, 2025</td>
                <td>
                  <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#prescriptionDetailModal1">View</button>
                </td>
              </tr>
              <tr>
                <td>Paracetamol</td>
                <td>650mg, 2 times daily</td>
                <td>Dr. Emily Johnson</td>
                <td>Oct 5, 2025</td>
                <td>
                  <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#prescriptionDetailModal2">View</button>
                </td>
              </tr>
              <tr>
                <td>Vitamin D</td>
                <td>1000 IU, once daily</td>
                <td>Dr. Michael Brown</td>
                <td>Oct 1, 2025</td>
                <td>
                  <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#prescriptionDetailModal3">View</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="modal-footer patient-modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- Prescription Detail Modals -->
<div class="modal fade" id="prescriptionDetailModal1" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content patient-modal-content">
      <div class="modal-header patient-modal-header">
        <h5 class="modal-title">Amoxicillin Prescription Details</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-md-6">
            <p><strong>Medication:</strong> Amoxicillin</p>
            <p><strong>Dosage:</strong> 500mg</p>
            <p><strong>Frequency:</strong> 3 times daily</p>
            <p><strong>Duration:</strong> 7 days</p>
          </div>
          <div class="col-md-6">
            <p><strong>Doctor:</strong> Dr. John Smith</p>
            <p><strong>Date:</strong> Oct 10, 2025</p>
            <p><strong>Prescription ID:</strong> RX-001</p>
            <p><strong>Status:</strong> <span class="badge bg-success patient-badge">Active</span></p>
          </div>
        </div>
        <div class="mt-3">
          <h6>Instructions:</h6>
          <p>Take one tablet three times a day with food. Complete the full course even if you feel better.</p>
        </div>
      </div>
      <div class="modal-footer patient-modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary patient-action-btn">Download</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="prescriptionDetailModal2" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content patient-modal-content">
      <div class="modal-header patient-modal-header">
        <h5 class="modal-title">Paracetamol Prescription Details</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-md-6">
            <p><strong>Medication:</strong> Paracetamol</p>
            <p><strong>Dosage:</strong> 650mg</p>
            <p><strong>Frequency:</strong> 2 times daily</p>
            <p><strong>Duration:</strong> 5 days</p>
          </div>
          <div class="col-md-6">
            <p><strong>Doctor:</strong> Dr. Emily Johnson</p>
            <p><strong>Date:</strong> Oct 5, 2025</p>
            <p><strong>Prescription ID:</strong> RX-002</p>
            <p><strong>Status:</strong> <span class="badge bg-warning patient-badge">Refill Needed</span></p>
          </div>
        </div>
        <div class="mt-3">
          <h6>Instructions:</h6>
          <p>Take one tablet twice daily as needed for pain or fever. Do not exceed 4 tablets in 24 hours.</p>
        </div>
      </div>
      <div class="modal-footer patient-modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary patient-action-btn">Download</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="prescriptionDetailModal3" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content patient-modal-content">
      <div class="modal-header patient-modal-header">
        <h5 class="modal-title">Vitamin D Prescription Details</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-md-6">
            <p><strong>Medication:</strong> Vitamin D</p>
            <p><strong>Dosage:</strong> 1000 IU</p>
            <p><strong>Frequency:</strong> Once daily</p>
            <p>            <p><strong>Duration:</strong> 30 days</p>
            <p><strong>Prescribed By:</strong> Dr. Sarah Johnson</p>
            <p><strong>Date:</strong> September 15, 2025</p>
          </div>
          <div class= col-md-6>
            <p><strong>Instructions:</strong> Take with food</p>
            <p><strong>Refills:</strong> 2</p>
            <p><strong>Pharmacy:</strong> TakeOpinion Pharmacy</p>
            <p><strong>Contact:</strong> +1 (555) 123-4567</p>
          </div>
        </div>
      </div>
      <div=modal-footer patient-modal-footer>
        <button type=button class=btn btn-secondary data-bs-dismiss=modal>Close</button>
        <button type=button class=btn btn-primary patient-action-btn>Download</button>
      </div>
    </div>
  </div>
</div>
{% endblock %}
